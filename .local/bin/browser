#!/bin/sh

url="$1"
containers="$(awk 'BEGIN{print ""} {print "firefox ("$0")"}' .config/containers.list 2> /dev/null)"
menu=$(printf "firefox$containers\nqutebrowser\nchromium\ncopy to clipboard\nplay" | dmenu -p browser)

case $menu in
    "firefox")
        firefox "$url" &
        ;;
    "firefox "*)
        container=$(echo "$menu" | awk -F'[()]' '{print $2}')
        firefox "ext+container:name=$container&url=$url" &
        ;;
    "qutebrowser")
        qutebrowser "$url" &
        ;;
    "chromium")
        chromium "$url" &
        ;;
    "copy to clipboard")
        echo "$url" | wl-copy
        ;;
    "play")
        mpv "$url" &
        ;;
esac
